(function () {
  // GLOBAL VARIABLES AND CACHED ELEMENTS
  var $contentWrapper;
  var buyPanelAddToCart;
  var buyPanelSizeList;
  var buyPanelSizeListClone;
  var geatButtonsContainer;
  var geatContentContainer;
  var geatSizeTitlePriceContainer;
  var geatStickyContainer;
  var geatTopNavWrapper;
  var newSizeTitlePriceContainerHeight;
  var originalCheckoutButton;
  var originalPaypalButton;
  var pdpContainer;
  var smartGiftButton;
  var areSizesShowing = false;
  var buttonPosition;
  var currentlySelectedItemSize;
  var isOnMobile = false;
  var isOnTablet = false;
  var isStickyContainerOpen = true;
  var jQuery;
  var screenWidth; // //////////////////////
  // TOP LEVEL TESTING FNS
  // //////////////////////

  var runPoll = function runPoll(pollCondition, offer) {
    var maxAttempts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 50;

    if (!maxAttempts) {
      return;
    }

    if (!pollCondition()) {
      maxAttempts -= 1; // eslint-disable-line no-param-reassign

      return setTimeout(runPoll, 1000, pollCondition, offer, maxAttempts); // eslint-disable-line consistent-return, max-len
    }

    offer();
  };

  var pollCondition = function pollCondition() {
    jQuery = window.jQuery;

    if (jQuery) {
      $contentWrapper = jQuery('.content-wrapper');
      pdpContainer = $contentWrapper.find('.pdp-container'); // This class is just to add specificity for styling and to
      // ensure classes elsewhere on UA are not overidden

      pdpContainer.addClass('GEAT-216-pdp-container');
      originalCheckoutButton = pdpContainer.find('.pdp-cta-btn');
      originalPaypalButton = pdpContainer.find('.pdp-paypal-checkout-button');
      return Boolean(originalCheckoutButton.length) && Boolean(originalPaypalButton.length);
    }

    return false;
  }; // /////////////////////////
  // TEST-SPECIFIC JAVASCRIPT
  // /////////////////////////
  // //////////////
  // Used by all
  // //////////////


  function handleCloseClick() {
    areSizesShowing = false;

    if (isOnMobile) {
      closeSizeListOnMobile();
    }

    buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--closed');
    return closeSizesTitlePrice();
  }

  function handleCTAButtonClick() {
    if (!currentlySelectedItemSize) handleSizeValidations();
  }

  function handleCTAs() {
    originalCheckoutButton.click(handleCTAButtonClick);
    originalPaypalButton.click(handleCTAButtonClick);
  }

  function handleSizeValidations() {
    if (areSizesShowing) {
      geatSizeTitlePriceContainer.css('height', newSizeTitlePriceContainerHeight + 20);
      buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--error-active');
      return geatSizeTitlePriceContainer.children('.GEAT-216-size-error').addClass('GEAT-216-size-error--active');
    }

    if (isOnMobile) {
      openSizeListOnMobile();
    } else {
      openSizeListOnDesktop();
    }

    openSizesTitlePrice();
    areSizesShowing = true;
    geatTopNavWrapper.click(handleCloseClick);
    return geatStickyContainer.find('.GEAT-216-close-link').click(handleCloseClick);
  }

  function closeSizesTitlePrice() {
    return geatSizeTitlePriceContainer.addClass('GEAT-216-content-container__size-title-price--closed');
  }

  function openSizesTitlePrice() {
    return geatSizeTitlePriceContainer.removeClass('GEAT-216-content-container__size-title-price--closed');
  }

  function prepareItemSize(size) {
    var $item = jQuery(size);
    if ($item.hasClass('selected')) currentlySelectedItemSize = $item;
    return $item;
  }

  function sizeListSizesCallback(_, size) {
    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};
    var $item = prepareItemSize(size);
    $item.click(function () {
      currentlySelectedItemSize = $item;
      callback($item);
      var sizeError = geatSizeTitlePriceContainer.children('.GEAT-216-size-error');

      if (sizeError) {
        geatSizeTitlePriceContainer.css('height', newSizeTitlePriceContainerHeight);
        sizeError.removeClass('GEAT-216-size-error--active');
        buyPanelSizeList.removeClass('GEAT-216-buypanel-sizelist--error-active');
      }
    });
  }

  function setUpBuyPanelSizeList(callback) {
    buyPanelSizeList = $contentWrapper.find('#sizeChipList');
    buyPanelSizeList.children().each(callback || sizeListSizesCallback);
    buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist');
  }

  function setSizeTitlePriceContainerHeight() {
    var extra = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    var sizeListHeight = buyPanelSizeList.height(); // sizeListHeight + margins around size list + aeshetic spacing

    newSizeTitlePriceContainerHeight = sizeListHeight + 30 + extra;
    console.log('sizeListHeight', sizeListHeight, extra, newSizeTitlePriceContainerHeight);
    geatSizeTitlePriceContainer.css('height', newSizeTitlePriceContainerHeight);
  } // //////////////
  // Desktop only
  // //////////////
  // Events


  function closeStickyContainerOnDesktop() {
    // If it's not open, there's no need to do a DOM manipulation.
    if (!isStickyContainerOpen) return;
    isStickyContainerOpen = false;
    buyPanelSizeList.removeClass('GEAT-216-buypanel-sizelist--sticky-open');
    buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--closed');
    geatStickyContainer.addClass('GEAT-216-sticky-container--closed');
    handleCloseClick();
    toggleCTALocationsOnDesktop();
  }

  function openStickyContainerOnDesktop() {
    if (isStickyContainerOpen) return;
    isStickyContainerOpen = true;
    buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--sticky-open');
    buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--closed');
    geatStickyContainer.removeClass('GEAT-216-sticky-container--closed');
    toggleCTALocationsOnDesktop();
  }

  function openSizeListOnDesktop() {
    return buyPanelSizeList.removeClass('GEAT-216-buypanel-sizelist--closed');
  }

  function setUpTitlesAndPricesOnDesktop(productPrice, productTitle) {
    geatSizeTitlePriceContainer = geatStickyContainer.children('.GEAT-216-content-container__size-title-price');
    geatContentContainer.children('.GEAT-216-title-price-heading-container').prepend(productTitle).append(productPrice);
  }

  function handleScrollOnDesktop() {
    var $scrollPosition = jQuery(window).scrollTop();
    if ($scrollPosition >= buttonPosition) return openStickyContainerOnDesktop();
    return closeStickyContainerOnDesktop();
  }

  function toggleCTALocationsOnDesktop() {
    if (pdpContainer.hasClass('GEAT-216-pdp-container--sticky-open')) {
      // cloneCheckout.remove();
      // clonePaypal.remove();
      buyPanelAddToCart.children('.GEAT-216-div-cta-placeholder').remove();
      return pdpContainer.removeClass('GEAT-216-pdp-container--sticky-open');
    }

    var height = geatSizeTitlePriceContainer.height() + 50;
    if (isOnTablet) height -= 16;
    originalCheckoutButton.after("\n        <div\n          class=\"GEAT-216-div-cta-placeholder\"\n          style=\"height: ".concat(height, "px\"\n        />\n      ")).after('<div class="GEAT-216-div-cta-placeholder" />');
    return pdpContainer.addClass('GEAT-216-pdp-container--sticky-open');
  }

  function addStickyContainerOnDesktop() {
    buyPanelAddToCart = $contentWrapper.find('.buypanel_addtocart');
    buyPanelAddToCart.append(stickyContainerHtml());
    geatStickyContainer = buyPanelAddToCart.children('.GEAT-216-sticky-container');
    smartGiftButton = buyPanelAddToCart.find('.pdp-smart-gift-button');
    smartGiftButton.addClass('GEAT-216-smart-gift-button');
  }

  function moveSizesOnDesktop() {
    setUpBuyPanelSizeList(); // 18 extra pixels for aesthetics

    setSizeTitlePriceContainerHeight(18);
  } // //////////////
  // Mobile only
  // //////////////


  function updateElementsInBuyPanelOnMobile() {
    var giftButton = buyPanelAddToCart.children('.pdp-smart-gift-button'); // screen width - width of quantity dropdown - margins (gutter left + between buttons + gutter right)

    var width = screenWidth - 100 - 49;
    giftButton.addClass('GEAT-216-gift-button');
    giftButton.css('width', width);
  }

  function buyPanelSizeListClonedSizeCallbackOnMobile(_, size) {
    var $item = prepareItemSize(size);
    $item.click(function () {
      currentlySelectedItemSize = $item;
    });
  }

  function moveSizesOnMobile() {
    buyPanelSizeList = $contentWrapper.find('#sizeChipList');
    buyPanelSizeListClone = buyPanelSizeList.clone();
    var parent = buyPanelSizeList.parent();

    var callback = function callback($item) {
      var id = $item.attr('id');
      var listItem = buyPanelSizeListClone.find("#".concat(id));
      listItem.addClass('selected');
    };

    setUpBuyPanelSizeList(function (_, size) {
      return sizeListSizesCallback(_, size, callback);
    });
    buyPanelSizeListClone.removeAttr('data-reactid');
    buyPanelSizeListClone.children().each(buyPanelSizeListClonedSizeCallbackOnMobile);
    closeSizeListOnMobile();
    parent.append(buyPanelSizeListClone); // 28 extra pixels for aesthetics

    setSizeTitlePriceContainerHeight(geatSizeTitlePriceContainer.height() + 28);
  }

  function closeSizeListOnMobile() {
    geatButtonsContainer.removeClass('GEAT-216-content-container__buttons--overlay-open');
    geatTopNavWrapper.removeClass('GEAT-216-top-nav-container--overlay-open');
    var darkBackground = geatStickyContainer.children('.GEAT-216-dark-background');
    if (darkBackground.length > 0) darkBackground.remove();
    return buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--closed');
  }

  function openSizeListOnMobile() {
    geatButtonsContainer.addClass('GEAT-216-content-container__buttons--overlay-open');
    geatTopNavWrapper.addClass('GEAT-216-top-nav-container--overlay-open');
    geatStickyContainer.prepend('<div class="GEAT-216-dark-background" />');
    geatStickyContainer.children('.GEAT-216-dark-background') // Extra 200 for a lil wiggle room
    .css('height', document.body.scrollHeight + 200).click(handleCloseClick);
    return buyPanelSizeList.removeClass('GEAT-216-buypanel-sizelist--closed');
  }

  function setUpTitlesAndPricesOnMobile(productPrice, productTitle) {
    geatSizeTitlePriceContainer = geatContentContainer.children('.GEAT-216-content-container__size-title-price');
    geatSizeTitlePriceContainer.children('.GEAT-216-title-price-heading-container').prepend(productTitle).append(productPrice);
  }

  function addSpecificBottomStyleOnMobile() {
    // container height + padding - button container height + extra for a lil cleaner transition
    var bottom = (geatSizeTitlePriceContainer.height() + 24 - 81 + 80) * -1;
    var bottomStyle = "\n      <style type='text/css'>\n        .GEAT-216-content-container__size-title-price--closed {\n          bottom: ".concat(bottom, "px;\n        }\n\n        .GEAT-216-buypanel-sizelist--closed {\n          bottom: ").concat(bottom, "px;\n        }\n      </style>\n    ");
    jQuery(bottomStyle).appendTo('head');
  }

  function addStickyContainerOnMobile() {
    buyPanelAddToCart = $contentWrapper.find('.buypanel_addtocart');
    buyPanelAddToCart.prepend(stickyContainerHtml());
    geatStickyContainer = buyPanelAddToCart.children('.GEAT-216-sticky-container');
    updateElementsInBuyPanelOnMobile();
  } // //////////////
  // Tablet only
  // //////////////


  function handleGoToAppIFrameAppearing() {
    if (!isOnTablet) return;
    var $iFrameBranchBanner = jQuery('#branch-banner-iframe');

    if ($iFrameBranchBanner.length > 0) {
      geatStickyContainer.addClass('GEAT-216-sticky-container--iframe-open');
      pdpContainer.addClass('GEAT-216-pdp-container--iframe-open');
      buyPanelSizeList.addClass('GEAT-216-buypanel-sizelist--iframe-open');
      $iFrameBranchBanner.contents().find('.branch-banner-close').click(function () {
        geatStickyContainer.removeClass('GEAT-216-sticky-container--iframe-open');
        pdpContainer.removeClass('GEAT-216-pdp-container--iframe-open');
        buyPanelSizeList.removeClass('GEAT-216-buypanel-sizelist--iframe-open');
      });
    }
  } // //////////////
  // Base Functionality
  // //////////////
  // HTMLs


  var closeButtonHtml = function closeButtonHtml() {
    return "\n    <div class=\"GEAT-216-close-link-container\">\n      <div class=\"GEAT-216-close-link\">\n        <span class=\"nav-list-mobile-icon GEAT-216-close-link__x\" />\n        <h4 class=\"GEAT-216-close-link__title\"> Close</h4>\n      </div>\n    </div>\n  ";
  };

  var sizeErrorHtml = function sizeErrorHtml() {
    return "\n    <div class=\"GEAT-216-size-error\">\n      Please select size\n    </div>\n  ";
  };

  var stickyContainerHtml = function stickyContainerHtml() {
    if (isOnMobile) {
      return "\n        <div class=\"pdp-redesign GEAT-216-sticky-container\">\n          <div class=\"GEAT-216-content-container\">\n            <div class=\"GEAT-216-content-container__size-title-price GEAT-216-content-container__size-title-price--closed\">\n              <div class=\"GEAT-216-title-price-heading-container\" />\n              ".concat(sizeErrorHtml(), "\n              ").concat(closeButtonHtml(), "\n            </div>\n\n            <div class=\"GEAT-216-content-container__buttons\" />\n          </div>\n        </div>\n      ");
    }

    return "\n      <div class=\"pdp-redesign GEAT-216-sticky-container GEAT-216-sticky-container--closed\">\n        <div class=\"GEAT-216-content-container\">\n          <div class=\"GEAT-216-title-price-heading-container\" />\n          <div class=\"GEAT-216-content-container__buttons\" />\n        </div>\n\n        <div class=\"GEAT-216-content-container__size-title-price GEAT-216-content-container__size-title-price--closed\">\n          ".concat(sizeErrorHtml(), "\n          ").concat(closeButtonHtml(), "\n        </div>\n      </div>\n    ");
  }; // Events


  function setUpTitlesAndPrices() {
    var buyPanelElements = pdpContainer.find('.buypanel').clone();
    var productPrice = buyPanelElements.find('.buypanel_productprice');
    var productTitle = buyPanelElements.find('.buypanel_producttitle');
    productPrice.addClass('GEAT-216-product-price');
    productTitle.addClass('GEAT-216-product-title');
    productTitle.children('.buypanel_cattitle').remove();
    if (isOnMobile) return setUpTitlesAndPricesOnMobile(productPrice, productTitle);
    return setUpTitlesAndPricesOnDesktop(productPrice, productTitle);
  }

  function addStickyContainer() {
    geatTopNavWrapper = $contentWrapper.find('.top-nav-container');
    geatTopNavWrapper.addClass('GEAT-216-top-nav-container');

    if (isOnMobile) {
      addStickyContainerOnMobile();
    } else {
      addStickyContainerOnDesktop();
    }

    geatContentContainer = geatStickyContainer.children('.GEAT-216-content-container');
    geatButtonsContainer = geatContentContainer.children('.GEAT-216-content-container__buttons');
    setUpTitlesAndPrices();

    if (isOnMobile) {
      moveSizesOnMobile();
      addSpecificBottomStyleOnMobile();
      return;
    }

    moveSizesOnDesktop();
    handleGoToAppIFrameAppearing();
  }

  var styles = "\n  <style type='text/css'>\n    .GEAT-216-close-link {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n    }\n\n    .GEAT-216-close-link__x:before {\n      top: 0;\n      transform: rotate(45deg);\n    }\n\n    .GEAT-216-close-link__x:after {\n      top: 0;\n      transform: rotate(-45deg);\n    }\n\n    .GEAT-216-content-container__buttons {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n    }\n\n    .GEAT-216-pdp-container.pdp-container.pdp-container-redesign .product-messaging {\n      display: none;\n    }\n\n    .GEAT-216-size-error--active {\n      border: 1px solid #e51b24;\n      font-style: italic;\n      padding: 10px 10px 8px;\n    }\n\n    @media (max-width: 767px) {\n      /************\n       * Containers\n       ************/\n\n      .GEAT-216-buypanel-sizelist {\n        bottom: 81px;\n        left: 15px;\n        position: fixed;\n        transition: bottom 0.6s linear;\n        width: calc(100% - 30px);\n        z-index: 109;\n      }\n\n      .GEAT-216-buypanel-sizelist--closed {\n        bottom: -1000px;\n      }\n\n      .GEAT-216-close-link-container {\n        position: absolute;\n        right: 15px;\n        top: 24px;\n      }\n\n      .GEAT-216-content-container__buttons {\n        background: white;\n        border-top: 0px solid #D3D3D3;\n        box-shadow: 0px -3px 10px 0px rgba(0, 0, 0, 0.15);\n        bottom: 0;\n        height: 81px;\n        padding: 21px 15px 15px;\n        position: fixed;\n        right: 0;\n        transition: border-top 0.3s linear, box-shadow 0.3s linear;\n        width: 100%;\n        z-index: 110;\n      }\n\n      .GEAT-216-content-container__buttons--overlay-open {\n        border-top: 1px solid #D3D3D3;\n        box-shadow: 0px 30px 10px;\n      }\n\n      .GEAT-216-content-container__size-title-price {\n        background: white;\n        bottom: 81px;\n        padding: 21px 15px 0;\n        position: fixed;\n        right: 0;\n        transition: bottom 0.6s linear;\n        width: 100%;\n        /* TODO: update 108 to not be so forking arbitrary */\n        z-index: 108;\n      }\n\n      .GEAT-216-content-container__size-title-price--closed {\n        bottom: -1000px;\n      }\n\n      #ua-top-nav .top-nav-container.GEAT-216-top-nav-container--overlay-open {\n        // z-index: 2;\n      }\n\n      /************\n       * Items\n       ************/\n\n      .GEAT-216-close-link__title {\n        display: none;\n      }\n\n      .GEAT-216-dark-background {\n        background: black;\n        left: 0;\n        opacity: 0.3;\n        position: absolute;\n        top: -400px;\n        width: 100%;\n        z-index: 108;\n      }\n\n      .GEAT-216-gift-button {\n        position: absolute;\n      }\n\n      .GEAT-216-product-price {\n        display: none;\n      }\n\n      .GEAT-216-pdp-container.pdp-container .pdp-redesign .pdp-cta-btn {\n        bottom: 15px;\n        min-width: initial;\n        position: fixed;\n        right: 15px;\n        top: initial;\n        width: calc(48% - 15px);\n        z-index: 110;\n      }\n\n      .GEAT-216-pdp-container .pdp-paypal-checkout-button.pdp-redesign {\n        bottom: 15px;\n        left: 15px;\n        margin: 0;\n        position: fixed;\n        top: initial;\n        width: calc(48% - 15px);\n        z-index: 110;\n      }\n\n      .GEAT-216-size-error--active {\n        margin-top: 15px;\n      }\n\n      .nav-list-mobile-icon.GEAT-216-close-link__x {\n        background: transparent;\n        margin: 0;\n        margin-top: 3px;\n      }\n\n      .nav-list-mobile-icon.GEAT-216-close-link__x,\n      .nav-list-mobile-icon.GEAT-216-close-link__x:after,\n      .nav-list-mobile-icon.GEAT-216-close-link__x:before {\n        width: 20px;\n      }\n\n      .pdp-redesign .size-chip.GEAT-216-size-list__size {\n        border-radius: 4px;\n        height: 35px;\n        line-height: 2.4;\n        margin-bottom: 20px;\n        margin-right: 20px;\n        min-width: 46px;\n      }\n\n      .pdp-redesign .size-chip.GEAT-216-size-list__size:last-child {\n        margin-right: 20px;\n      }\n\n      .pdp-container.pdp-container-redesign .buypanel_producttitle.GEAT-216-product-title {\n        font-size: 18px;\n        margin: 0;\n        margin-bottom: 14px;\n      }\n    }\n\n    @media (min-width: 767px) {\n      /************\n       * Containers\n       ************/\n\n      .GEAT-216-sticky-container {\n        background: white;\n        box-shadow: 0px 10px 9px 0px rgba(0, 0, 0, 0.15);\n        left: 0;\n        min-height: 80px;\n        padding: 15px 24px 24px calc(5% + 16px);\n        position: fixed;\n        top: 106px;\n        // transition: top 0.8s ease-out;\n        width: 100%;\n        z-index: 4;\n      }\n\n      .GEAT-216-close-link-container {\n        bottom: 15px;\n        position: absolute;\n        right: 24px;\n      }\n\n      .GEAT-216-content-container {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        position: relative;\n      }\n\n      .GEAT-216-content-container__size-title-price--closed {\n        display: none;\n      }\n\n      .GEAT-216-content-container__buttons {\n        max-height: 24px;\n      }\n\n      .GEAT-216-title-price-heading-container {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        margin-top: 17px;\n      }\n\n      /* TODO: try and remove these */\n      .GEAT-216-top-nav-container .ua-top-nav-site-nav {\n        z-index: 2;\n      }\n\n      .GEAT-216-top-nav-container .ua-top-nav-messaging-container {\n        z-index: 2;\n      }\n\n      .GEAT-216-top-nav-container .ua-top-nav-bar {\n        z-index: 2;\n      }\n\n      .GEAT-216-pdp-container .product-thumbnail-images {\n        z-index: 2;\n      }\n\n      .pdp-redesign.GEAT-216-sticky-container--closed {\n        top: -280px;\n        // transition: top 0.8s ease-in;\n      }\n\n      /************\n       * Items\n       ************/\n\n      .GEAT-216-close-link {\n        float: right;\n        margin-right: 20px;\n      }\n\n      .GEAT-216-close-link:hover {\n        color: #767676;\n        cursor: pointer;\n      }\n\n      .pdp-container.pdp-container-redesign .buypanel_productprice.GEAT-216-product-price {\n        font-size: 15px;\n        margin: 0 0 0 15px;\n      }\n\n      .GEAT-216-product-title {\n        font-size: 15px;\n        line-height: 15px;\n        margin: 0;\n      }\n\n      .GEAT-216-size-error {\n        margin-top: 15px;\n        max-width: 200px;\n      }\n\n      .GEAT-216-size-error--active {\n        margin-top: 10px;\n      }\n\n      .buypanel_sizelist.GEAT-216-buypanel-sizelist--sticky-open {\n        top: 188px;\n        left: calc(5% + 16px);\n        position: fixed;\n        // transition: top 0.6s linear;\n        width: 353px;\n        z-index: 5;\n      }\n\n      .GEAT-216-buypanel-sizelist--sticky-open.GEAT-216-buypanel-sizelist--closed {\n        display: none;\n      }\n\n      .GEAT-216-buypanel-sizelist--sticky-open.GEAT-216-buypanel-sizelist--error-active {\n        top: 198px;\n        transition: none;\n      }\n\n      .GEAT-216-close-link:hover .nav-list-mobile-icon.GEAT-216-close-link__x:after,\n      .GEAT-216-close-link:hover .nav-list-mobile-icon.GEAT-216-close-link__x:before {\n        background: #767676;\n        transition: none;\n      }\n\n      .GEAT-216-div-cta-placeholder {\n        height: 38px;\n        width: 50px;\n      }\n\n      .GEAT-216-div-cta-placeholder:first-of-type {\n        display: inline-block;\n      }\n\n      .GEAT-216-div-cta-placeholder:nth-of-type(2) {\n        height: 170px;\n      }\n\n      .pdp-redesign .size-chip.GEAT-216-size-list__size {\n        border-radius: 4px;\n        margin-right: 15px;\n      }\n\n      .nav-list-mobile-icon.GEAT-216-close-link__x {\n        background: transparent;\n        margin: 9px 9px 0 0;\n      }\n\n      .nav-list-mobile-icon.GEAT-216-close-link__x,\n      .nav-list-mobile-icon.GEAT-216-close-link__x:after,\n      .nav-list-mobile-icon.GEAT-216-close-link__x:before {\n        width: 16px;\n        transition: none;\n      }\n\n      /* CTAs */\n\n      .GEAT-216-pdp-container.pdp-container.GEAT-216-pdp-container--sticky-open .pdp-redesign .pdp-cta-btn,\n      .GEAT-216-pdp-container.GEAT-216-pdp-container--sticky-open .pdp-paypal-checkout-button.pdp-redesign {\n        position: fixed;\n        top: 121px;\n        // transition: top 0.8s ease-out;\n        width: 200px;\n        z-index: 110;\n      }\n\n      .GEAT-216-pdp-container.pdp-container.GEAT-216-pdp-container--sticky-open .pdp-redesign .pdp-cta-btn {\n        right: 30px;\n        min-width: initial;\n      }\n\n      .GEAT-216-pdp-container.GEAT-216-pdp-container--sticky-open .pdp-paypal-checkout-button.pdp-redesign {\n        right: 245px;\n        margin: 0;\n      }\n\n      // .GEAT-216-pdp-container.pdp-container .pdp-redesign .pdp-cta-btn.GEAT-216-cta-button--hidden,\n      // .GEAT-216-pdp-container .pdp-paypal-checkout-button.pdp-redesign.GEAT-216-cta-button--hidden {\n      //   top: -280px;\n      //   transition: top 0.8s ease-in;\n      // }\n\n      .GEAT-216-smart-gift-button {\n        margin-top: 16px;\n      }\n\n      .GEAT-216-pdp-container .pdp-paypal-checkout-button.pdp-redesign {\n        margin-bottom: 0;\n      }\n\n      @media (min-width: 767px) and (max-width: 991px) {\n        /************\n         * Containers\n         ************/\n\n        .pdp-container.pdp-container-redesign .buypanel_producttitle.GEAT-216-product-title {\n          font-size: 15px;\n          line-height: 15px;\n          margin: 0;\n        }\n\n        .pdp-container.pdp-container-redesign .buypanel_productprice.GEAT-216-product-price {\n          font-size: 15px;\n          padding: 0;\n        }\n\n        .GEAT-216-sticky-container--iframe-open {\n          top: 186px;\n        }\n\n        /************\n         * Items\n         ************/\n\n        .buypanel_sizelist.GEAT-216-buypanel-sizelist--sticky-open.GEAT-216-buypanel-sizelist--iframe-open {\n          top: 268px;\n        }\n\n        .GEAT-216-buypanel-sizelist--sticky-open.GEAT-216-buypanel-sizelist--error-active.GEAT-216-buypanel-sizelist--iframe-open {\n          top: 278px;\n          transition: none;\n        }\n\n        .GEAT-216-pdp-container.pdp-container.GEAT-216-pdp-container--sticky-open .pdp-redesign .pdp-cta-btn,\n        .GEAT-216-pdp-container.GEAT-216-pdp-container--sticky-open .pdp-paypal-checkout-button.pdp-redesign {\n          width: 160px;\n        }\n\n        .GEAT-216-pdp-container.pdp-container.GEAT-216-pdp-container--sticky-open.GEAT-216-pdp-container--iframe-open .pdp-redesign .pdp-cta-btn,\n        .GEAT-216-pdp-container.GEAT-216-pdp-container--sticky-open.GEAT-216-pdp-container--iframe-open .pdp-paypal-checkout-button.pdp-redesign {\n          top: 201px;\n        }\n\n        .GEAT-216-pdp-container.GEAT-216-pdp-container--sticky-open .pdp-paypal-checkout-button.pdp-redesign {\n          right: 204px;\n        }\n\n        .GEAT-216-product-title {\n          max-width: 265px;\n        }\n      }\n    }\n  </style>\n";

  var offer = function offer() {
    jQuery(styles).appendTo('head');

    window.require('process').once('addToCart.complete', function () {
      console.log('checkout complete... add tracking event here');
      handleCloseClick();
    });

    screenWidth = window.screen.width;
    isOnMobile = screenWidth < 768;
    isOnTablet = screenWidth > 767 && screenWidth < 991;

    if (!isOnMobile) {
      // button position - message nav size - main nav size + button size
      buttonPosition = originalCheckoutButton.offset().top - 30 - 75 + 50;
      isStickyContainerOpen = false;
      jQuery(window).on('scroll', handleScrollOnDesktop);
    }

    handleCTAs();
    addStickyContainer();
  };

  runPoll(pollCondition, offer, 50);
})(); // TODOS
// -----
//
// General:
//
// Desktop:
// - Update transition
// - Update position where sticky comes in
//
// Mobile:
// - Sizes container spacing issue in compiled code
//
// Tablet:
// - Update position where sticky comes in
//
// QA:
//
// Blockers:
//
// Lessons:
// - Use toggle functions a lot more. You need conditionals

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiXSwibmFtZXMiOlsiJGNvbnRlbnRXcmFwcGVyIiwiYnV5UGFuZWxBZGRUb0NhcnQiLCJidXlQYW5lbFNpemVMaXN0IiwiYnV5UGFuZWxTaXplTGlzdENsb25lIiwiZ2VhdEJ1dHRvbnNDb250YWluZXIiLCJnZWF0Q29udGVudENvbnRhaW5lciIsImdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lciIsImdlYXRTdGlja3lDb250YWluZXIiLCJnZWF0VG9wTmF2V3JhcHBlciIsIm5ld1NpemVUaXRsZVByaWNlQ29udGFpbmVySGVpZ2h0Iiwib3JpZ2luYWxDaGVja291dEJ1dHRvbiIsIm9yaWdpbmFsUGF5cGFsQnV0dG9uIiwicGRwQ29udGFpbmVyIiwic21hcnRHaWZ0QnV0dG9uIiwiYXJlU2l6ZXNTaG93aW5nIiwiYnV0dG9uUG9zaXRpb24iLCJjdXJyZW50bHlTZWxlY3RlZEl0ZW1TaXplIiwiaXNPbk1vYmlsZSIsImlzT25UYWJsZXQiLCJpc1N0aWNreUNvbnRhaW5lck9wZW4iLCJqUXVlcnkiLCJzY3JlZW5XaWR0aCIsInJ1blBvbGwiLCJwb2xsQ29uZGl0aW9uIiwib2ZmZXIiLCJtYXhBdHRlbXB0cyIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJmaW5kIiwiYWRkQ2xhc3MiLCJCb29sZWFuIiwibGVuZ3RoIiwiaGFuZGxlQ2xvc2VDbGljayIsImNsb3NlU2l6ZUxpc3RPbk1vYmlsZSIsImNsb3NlU2l6ZXNUaXRsZVByaWNlIiwiaGFuZGxlQ1RBQnV0dG9uQ2xpY2siLCJoYW5kbGVTaXplVmFsaWRhdGlvbnMiLCJoYW5kbGVDVEFzIiwiY2xpY2siLCJjc3MiLCJjaGlsZHJlbiIsIm9wZW5TaXplTGlzdE9uTW9iaWxlIiwib3BlblNpemVMaXN0T25EZXNrdG9wIiwib3BlblNpemVzVGl0bGVQcmljZSIsInJlbW92ZUNsYXNzIiwicHJlcGFyZUl0ZW1TaXplIiwic2l6ZSIsIiRpdGVtIiwiaGFzQ2xhc3MiLCJzaXplTGlzdFNpemVzQ2FsbGJhY2siLCJfIiwiY2FsbGJhY2siLCJzaXplRXJyb3IiLCJzZXRVcEJ1eVBhbmVsU2l6ZUxpc3QiLCJlYWNoIiwic2V0U2l6ZVRpdGxlUHJpY2VDb250YWluZXJIZWlnaHQiLCJleHRyYSIsInNpemVMaXN0SGVpZ2h0IiwiaGVpZ2h0IiwiY29uc29sZSIsImxvZyIsImNsb3NlU3RpY2t5Q29udGFpbmVyT25EZXNrdG9wIiwidG9nZ2xlQ1RBTG9jYXRpb25zT25EZXNrdG9wIiwib3BlblN0aWNreUNvbnRhaW5lck9uRGVza3RvcCIsInNldFVwVGl0bGVzQW5kUHJpY2VzT25EZXNrdG9wIiwicHJvZHVjdFByaWNlIiwicHJvZHVjdFRpdGxlIiwicHJlcGVuZCIsImFwcGVuZCIsImhhbmRsZVNjcm9sbE9uRGVza3RvcCIsIiRzY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvcCIsInJlbW92ZSIsImFmdGVyIiwiYWRkU3RpY2t5Q29udGFpbmVyT25EZXNrdG9wIiwic3RpY2t5Q29udGFpbmVySHRtbCIsIm1vdmVTaXplc09uRGVza3RvcCIsInVwZGF0ZUVsZW1lbnRzSW5CdXlQYW5lbE9uTW9iaWxlIiwiZ2lmdEJ1dHRvbiIsIndpZHRoIiwiYnV5UGFuZWxTaXplTGlzdENsb25lZFNpemVDYWxsYmFja09uTW9iaWxlIiwibW92ZVNpemVzT25Nb2JpbGUiLCJjbG9uZSIsInBhcmVudCIsImlkIiwiYXR0ciIsImxpc3RJdGVtIiwicmVtb3ZlQXR0ciIsImRhcmtCYWNrZ3JvdW5kIiwiZG9jdW1lbnQiLCJib2R5Iiwic2Nyb2xsSGVpZ2h0Iiwic2V0VXBUaXRsZXNBbmRQcmljZXNPbk1vYmlsZSIsImFkZFNwZWNpZmljQm90dG9tU3R5bGVPbk1vYmlsZSIsImJvdHRvbSIsImJvdHRvbVN0eWxlIiwiYXBwZW5kVG8iLCJhZGRTdGlja3lDb250YWluZXJPbk1vYmlsZSIsImhhbmRsZUdvVG9BcHBJRnJhbWVBcHBlYXJpbmciLCIkaUZyYW1lQnJhbmNoQmFubmVyIiwiY29udGVudHMiLCJjbG9zZUJ1dHRvbkh0bWwiLCJzaXplRXJyb3JIdG1sIiwic2V0VXBUaXRsZXNBbmRQcmljZXMiLCJidXlQYW5lbEVsZW1lbnRzIiwiYWRkU3RpY2t5Q29udGFpbmVyIiwic3R5bGVzIiwicmVxdWlyZSIsIm9uY2UiLCJzY3JlZW4iLCJvZmZzZXQiLCJ0b3AiLCJvbiJdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7O1FBR0E7UUFDQTs7Ozs7Ozs7Ozs7O0FDbEZDLGFBQVk7QUFDWDtBQUNBLE1BQUlBLGVBQUo7QUFFQSxNQUFJQyxpQkFBSjtBQUNBLE1BQUlDLGdCQUFKO0FBQ0EsTUFBSUMscUJBQUo7QUFDQSxNQUFJQyxvQkFBSjtBQUNBLE1BQUlDLG9CQUFKO0FBQ0EsTUFBSUMsMkJBQUo7QUFDQSxNQUFJQyxtQkFBSjtBQUNBLE1BQUlDLGlCQUFKO0FBQ0EsTUFBSUMsZ0NBQUo7QUFDQSxNQUFJQyxzQkFBSjtBQUNBLE1BQUlDLG9CQUFKO0FB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dWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL2luZGV4LmpzXCIpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgLy8gR0xPQkFMIFZBUklBQkxFUyBBTkQgQ0FDSEVEIEVMRU1FTlRTXG4gIGxldCAkY29udGVudFdyYXBwZXI7XG5cbiAgbGV0IGJ1eVBhbmVsQWRkVG9DYXJ0O1xuICBsZXQgYnV5UGFuZWxTaXplTGlzdDtcbiAgbGV0IGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZTtcbiAgbGV0IGdlYXRCdXR0b25zQ29udGFpbmVyO1xuICBsZXQgZ2VhdENvbnRlbnRDb250YWluZXI7XG4gIGxldCBnZWF0U2l6ZVRpdGxlUHJpY2VDb250YWluZXI7XG4gIGxldCBnZWF0U3RpY2t5Q29udGFpbmVyO1xuICBsZXQgZ2VhdFRvcE5hdldyYXBwZXI7XG4gIGxldCBuZXdTaXplVGl0bGVQcmljZUNvbnRhaW5lckhlaWdodDtcbiAgbGV0IG9yaWdpbmFsQ2hlY2tvdXRCdXR0b247XG4gIGxldCBvcmlnaW5hbFBheXBhbEJ1dHRvbjtcbiAgbGV0IHBkcENvbnRhaW5lcjtcbiAgbGV0IHNtYXJ0R2lmdEJ1dHRvbjtcblxuICBsZXQgYXJlU2l6ZXNTaG93aW5nID0gZmFsc2U7XG4gIGxldCBidXR0b25Qb3NpdGlvbjtcbiAgbGV0IGN1cnJlbnRseVNlbGVjdGVkSXRlbVNpemU7XG4gIGxldCBpc09uTW9iaWxlID0gZmFsc2U7XG4gIGxldCBpc09uVGFibGV0ID0gZmFsc2U7XG4gIGxldCBpc1N0aWNreUNvbnRhaW5lck9wZW4gPSB0cnVlO1xuICBsZXQgalF1ZXJ5O1xuICBsZXQgc2NyZWVuV2lkdGg7XG5cbiAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBUT1AgTEVWRUwgVEVTVElORyBGTlNcbiAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGNvbnN0IHJ1blBvbGwgPSAocG9sbENvbmRpdGlvbiwgb2ZmZXIsIG1heEF0dGVtcHRzID0gNTApID0+IHtcbiAgICBpZiAoIW1heEF0dGVtcHRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFwb2xsQ29uZGl0aW9uKCkpIHtcbiAgICAgIG1heEF0dGVtcHRzIC09IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJ1blBvbGwsIDEwMDAsIHBvbGxDb25kaXRpb24sIG9mZmVyLCBtYXhBdHRlbXB0cyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC1yZXR1cm4sIG1heC1sZW5cbiAgICB9XG5cbiAgICBvZmZlcigpO1xuICB9O1xuXG4gIGNvbnN0IHBvbGxDb25kaXRpb24gPSAoKSA9PiB7XG4gICAgalF1ZXJ5ID0gd2luZG93LmpRdWVyeTtcblxuICAgIGlmIChqUXVlcnkpIHtcbiAgICAgICRjb250ZW50V3JhcHBlciA9IGpRdWVyeSgnLmNvbnRlbnQtd3JhcHBlcicpO1xuICAgICAgcGRwQ29udGFpbmVyID0gJGNvbnRlbnRXcmFwcGVyLmZpbmQoJy5wZHAtY29udGFpbmVyJyk7XG4gICAgICAvLyBUaGlzIGNsYXNzIGlzIGp1c3QgdG8gYWRkIHNwZWNpZmljaXR5IGZvciBzdHlsaW5nIGFuZCB0b1xuICAgICAgLy8gZW5zdXJlIGNsYXNzZXMgZWxzZXdoZXJlIG9uIFVBIGFyZSBub3Qgb3ZlcmlkZGVuXG4gICAgICBwZHBDb250YWluZXIuYWRkQ2xhc3MoJ0dFQVQtMjE2LXBkcC1jb250YWluZXInKTtcblxuICAgICAgb3JpZ2luYWxDaGVja291dEJ1dHRvbiA9IHBkcENvbnRhaW5lci5maW5kKCcucGRwLWN0YS1idG4nKTtcbiAgICAgIG9yaWdpbmFsUGF5cGFsQnV0dG9uID0gcGRwQ29udGFpbmVyLmZpbmQoJy5wZHAtcGF5cGFsLWNoZWNrb3V0LWJ1dHRvbicpO1xuXG4gICAgICByZXR1cm4gQm9vbGVhbihvcmlnaW5hbENoZWNrb3V0QnV0dG9uLmxlbmd0aClcbiAgICAgICAgJiYgQm9vbGVhbihvcmlnaW5hbFBheXBhbEJ1dHRvbi5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIFRFU1QtU1BFQ0lGSUMgSkFWQVNDUklQVFxuICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLy8gLy8vLy8vLy8vLy8vLy9cbiAgLy8gVXNlZCBieSBhbGxcbiAgLy8gLy8vLy8vLy8vLy8vLy9cblxuICBmdW5jdGlvbiBoYW5kbGVDbG9zZUNsaWNrKCkge1xuICAgIGFyZVNpemVzU2hvd2luZyA9IGZhbHNlO1xuXG4gICAgaWYgKGlzT25Nb2JpbGUpIHtcbiAgICAgIGNsb3NlU2l6ZUxpc3RPbk1vYmlsZSgpO1xuICAgIH1cblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3QuYWRkQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1jbG9zZWQnKTtcblxuICAgIHJldHVybiBjbG9zZVNpemVzVGl0bGVQcmljZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ1RBQnV0dG9uQ2xpY2soKSB7XG4gICAgaWYgKCFjdXJyZW50bHlTZWxlY3RlZEl0ZW1TaXplKSBoYW5kbGVTaXplVmFsaWRhdGlvbnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNUQXMoKSB7XG4gICAgb3JpZ2luYWxDaGVja291dEJ1dHRvbi5jbGljayhoYW5kbGVDVEFCdXR0b25DbGljayk7XG4gICAgb3JpZ2luYWxQYXlwYWxCdXR0b24uY2xpY2soaGFuZGxlQ1RBQnV0dG9uQ2xpY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2l6ZVZhbGlkYXRpb25zKCkge1xuICAgIGlmIChhcmVTaXplc1Nob3dpbmcpIHtcbiAgICAgIGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lci5jc3MoJ2hlaWdodCcsIG5ld1NpemVUaXRsZVByaWNlQ29udGFpbmVySGVpZ2h0ICsgMjApO1xuXG4gICAgICBidXlQYW5lbFNpemVMaXN0LmFkZENsYXNzKCdHRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tZXJyb3ItYWN0aXZlJyk7XG5cbiAgICAgIHJldHVybiBnZWF0U2l6ZVRpdGxlUHJpY2VDb250YWluZXJcbiAgICAgICAgLmNoaWxkcmVuKCcuR0VBVC0yMTYtc2l6ZS1lcnJvcicpXG4gICAgICAgIC5hZGRDbGFzcygnR0VBVC0yMTYtc2l6ZS1lcnJvci0tYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKGlzT25Nb2JpbGUpIHtcbiAgICAgIG9wZW5TaXplTGlzdE9uTW9iaWxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wZW5TaXplTGlzdE9uRGVza3RvcCgpO1xuICAgIH1cblxuICAgIG9wZW5TaXplc1RpdGxlUHJpY2UoKTtcblxuICAgIGFyZVNpemVzU2hvd2luZyA9IHRydWU7XG5cbiAgICBnZWF0VG9wTmF2V3JhcHBlci5jbGljayhoYW5kbGVDbG9zZUNsaWNrKTtcblxuICAgIHJldHVybiBnZWF0U3RpY2t5Q29udGFpbmVyXG4gICAgICAuZmluZCgnLkdFQVQtMjE2LWNsb3NlLWxpbmsnKVxuICAgICAgLmNsaWNrKGhhbmRsZUNsb3NlQ2xpY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VTaXplc1RpdGxlUHJpY2UoKSB7XG4gICAgcmV0dXJuIGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lclxuICAgICAgLmFkZENsYXNzKCdHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZS0tY2xvc2VkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBvcGVuU2l6ZXNUaXRsZVByaWNlKCkge1xuICAgIHJldHVybiBnZWF0U2l6ZVRpdGxlUHJpY2VDb250YWluZXJcbiAgICAgIC5yZW1vdmVDbGFzcygnR0VBVC0yMTYtY29udGVudC1jb250YWluZXJfX3NpemUtdGl0bGUtcHJpY2UtLWNsb3NlZCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJlcGFyZUl0ZW1TaXplKHNpemUpIHtcbiAgICBjb25zdCAkaXRlbSA9IGpRdWVyeShzaXplKTtcblxuICAgIGlmICgkaXRlbS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkgY3VycmVudGx5U2VsZWN0ZWRJdGVtU2l6ZSA9ICRpdGVtO1xuXG4gICAgcmV0dXJuICRpdGVtO1xuICB9XG5cbiAgZnVuY3Rpb24gc2l6ZUxpc3RTaXplc0NhbGxiYWNrKF8sIHNpemUsIGNhbGxiYWNrID0gKCkgPT4ge30pIHtcbiAgICBjb25zdCAkaXRlbSA9IHByZXBhcmVJdGVtU2l6ZShzaXplKTtcblxuICAgICRpdGVtLmNsaWNrKCgpID0+IHtcbiAgICAgIGN1cnJlbnRseVNlbGVjdGVkSXRlbVNpemUgPSAkaXRlbTtcblxuICAgICAgY2FsbGJhY2soJGl0ZW0pO1xuXG4gICAgICBjb25zdCBzaXplRXJyb3IgPSBnZWF0U2l6ZVRpdGxlUHJpY2VDb250YWluZXIuY2hpbGRyZW4oJy5HRUFULTIxNi1zaXplLWVycm9yJyk7XG5cbiAgICAgIGlmIChzaXplRXJyb3IpIHtcbiAgICAgICAgZ2VhdFNpemVUaXRsZVByaWNlQ29udGFpbmVyLmNzcygnaGVpZ2h0JywgbmV3U2l6ZVRpdGxlUHJpY2VDb250YWluZXJIZWlnaHQpO1xuICAgICAgICBzaXplRXJyb3IucmVtb3ZlQ2xhc3MoJ0dFQVQtMjE2LXNpemUtZXJyb3ItLWFjdGl2ZScpO1xuICAgICAgICBidXlQYW5lbFNpemVMaXN0LnJlbW92ZUNsYXNzKCdHRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tZXJyb3ItYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRVcEJ1eVBhbmVsU2l6ZUxpc3QoY2FsbGJhY2spIHtcbiAgICBidXlQYW5lbFNpemVMaXN0ID0gJGNvbnRlbnRXcmFwcGVyLmZpbmQoJyNzaXplQ2hpcExpc3QnKTtcblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3RcbiAgICAgIC5jaGlsZHJlbigpXG4gICAgICAuZWFjaChjYWxsYmFjayB8fCBzaXplTGlzdFNpemVzQ2FsbGJhY2spO1xuXG4gICAgYnV5UGFuZWxTaXplTGlzdC5hZGRDbGFzcygnR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3QnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNpemVUaXRsZVByaWNlQ29udGFpbmVySGVpZ2h0KGV4dHJhID0gMCkge1xuICAgIGNvbnN0IHNpemVMaXN0SGVpZ2h0ID0gYnV5UGFuZWxTaXplTGlzdC5oZWlnaHQoKTtcbiAgICAvLyBzaXplTGlzdEhlaWdodCArIG1hcmdpbnMgYXJvdW5kIHNpemUgbGlzdCArIGFlc2hldGljIHNwYWNpbmdcbiAgICBuZXdTaXplVGl0bGVQcmljZUNvbnRhaW5lckhlaWdodCA9IHNpemVMaXN0SGVpZ2h0ICsgMzAgKyBleHRyYTtcbiAgICBjb25zb2xlLmxvZygnc2l6ZUxpc3RIZWlnaHQnLCBzaXplTGlzdEhlaWdodCwgZXh0cmEsIG5ld1NpemVUaXRsZVByaWNlQ29udGFpbmVySGVpZ2h0KTtcblxuICAgIGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lci5jc3MoJ2hlaWdodCcsIG5ld1NpemVUaXRsZVByaWNlQ29udGFpbmVySGVpZ2h0KTtcbiAgfVxuXG4gIC8vIC8vLy8vLy8vLy8vLy8vXG4gIC8vIERlc2t0b3Agb25seVxuICAvLyAvLy8vLy8vLy8vLy8vL1xuXG4gIC8vIEV2ZW50c1xuICBmdW5jdGlvbiBjbG9zZVN0aWNreUNvbnRhaW5lck9uRGVza3RvcCgpIHtcbiAgICAvLyBJZiBpdCdzIG5vdCBvcGVuLCB0aGVyZSdzIG5vIG5lZWQgdG8gZG8gYSBET00gbWFuaXB1bGF0aW9uLlxuICAgIGlmICghaXNTdGlja3lDb250YWluZXJPcGVuKSByZXR1cm47XG5cbiAgICBpc1N0aWNreUNvbnRhaW5lck9wZW4gPSBmYWxzZTtcblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3QucmVtb3ZlQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3BlbicpO1xuICAgIGJ1eVBhbmVsU2l6ZUxpc3QuYWRkQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1jbG9zZWQnKTtcbiAgICBnZWF0U3RpY2t5Q29udGFpbmVyLmFkZENsYXNzKCdHRUFULTIxNi1zdGlja3ktY29udGFpbmVyLS1jbG9zZWQnKTtcbiAgICBoYW5kbGVDbG9zZUNsaWNrKCk7XG5cbiAgICB0b2dnbGVDVEFMb2NhdGlvbnNPbkRlc2t0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5TdGlja3lDb250YWluZXJPbkRlc2t0b3AoKSB7XG4gICAgaWYgKGlzU3RpY2t5Q29udGFpbmVyT3BlbikgcmV0dXJuO1xuXG4gICAgaXNTdGlja3lDb250YWluZXJPcGVuID0gdHJ1ZTtcblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3QuYWRkQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3BlbicpO1xuICAgIGJ1eVBhbmVsU2l6ZUxpc3QuYWRkQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1jbG9zZWQnKTtcbiAgICBnZWF0U3RpY2t5Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdHRUFULTIxNi1zdGlja3ktY29udGFpbmVyLS1jbG9zZWQnKTtcblxuICAgIHRvZ2dsZUNUQUxvY2F0aW9uc09uRGVza3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlblNpemVMaXN0T25EZXNrdG9wKCkge1xuICAgIHJldHVybiBidXlQYW5lbFNpemVMaXN0LnJlbW92ZUNsYXNzKCdHRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tY2xvc2VkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRVcFRpdGxlc0FuZFByaWNlc09uRGVza3RvcChwcm9kdWN0UHJpY2UsIHByb2R1Y3RUaXRsZSkge1xuICAgIGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lciA9IGdlYXRTdGlja3lDb250YWluZXJcbiAgICAgIC5jaGlsZHJlbignLkdFQVQtMjE2LWNvbnRlbnQtY29udGFpbmVyX19zaXplLXRpdGxlLXByaWNlJyk7XG5cbiAgICBnZWF0Q29udGVudENvbnRhaW5lclxuICAgICAgLmNoaWxkcmVuKCcuR0VBVC0yMTYtdGl0bGUtcHJpY2UtaGVhZGluZy1jb250YWluZXInKVxuICAgICAgLnByZXBlbmQocHJvZHVjdFRpdGxlKVxuICAgICAgLmFwcGVuZChwcm9kdWN0UHJpY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2Nyb2xsT25EZXNrdG9wKCkge1xuICAgIGNvbnN0ICRzY3JvbGxQb3NpdGlvbiA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgaWYgKCRzY3JvbGxQb3NpdGlvbiA+PSBidXR0b25Qb3NpdGlvbikgcmV0dXJuIG9wZW5TdGlja3lDb250YWluZXJPbkRlc2t0b3AoKTtcblxuICAgIHJldHVybiBjbG9zZVN0aWNreUNvbnRhaW5lck9uRGVza3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlQ1RBTG9jYXRpb25zT25EZXNrdG9wKCkge1xuICAgIGlmIChwZHBDb250YWluZXIuaGFzQ2xhc3MoJ0dFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuJykpIHtcbiAgICAgIC8vIGNsb25lQ2hlY2tvdXQucmVtb3ZlKCk7XG4gICAgICAvLyBjbG9uZVBheXBhbC5yZW1vdmUoKTtcblxuICAgICAgYnV5UGFuZWxBZGRUb0NhcnQuY2hpbGRyZW4oJy5HRUFULTIxNi1kaXYtY3RhLXBsYWNlaG9sZGVyJykucmVtb3ZlKCk7XG5cbiAgICAgIHJldHVybiBwZHBDb250YWluZXIucmVtb3ZlQ2xhc3MoJ0dFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuJyk7XG4gICAgfVxuXG4gICAgbGV0IGhlaWdodCA9IGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lci5oZWlnaHQoKSArIDUwO1xuXG4gICAgaWYgKGlzT25UYWJsZXQpIGhlaWdodCAtPSAxNjtcblxuICAgIG9yaWdpbmFsQ2hlY2tvdXRCdXR0b25cbiAgICAgIC5hZnRlcihgXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cIkdFQVQtMjE2LWRpdi1jdGEtcGxhY2Vob2xkZXJcIlxuICAgICAgICAgIHN0eWxlPVwiaGVpZ2h0OiAke2hlaWdodH1weFwiXG4gICAgICAgIC8+XG4gICAgICBgKVxuICAgICAgLmFmdGVyKCc8ZGl2IGNsYXNzPVwiR0VBVC0yMTYtZGl2LWN0YS1wbGFjZWhvbGRlclwiIC8+Jyk7XG5cbiAgICByZXR1cm4gcGRwQ29udGFpbmVyLmFkZENsYXNzKCdHRUFULTIxNi1wZHAtY29udGFpbmVyLS1zdGlja3ktb3BlbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU3RpY2t5Q29udGFpbmVyT25EZXNrdG9wKCkge1xuICAgIGJ1eVBhbmVsQWRkVG9DYXJ0ID0gJGNvbnRlbnRXcmFwcGVyLmZpbmQoJy5idXlwYW5lbF9hZGR0b2NhcnQnKTtcbiAgICBidXlQYW5lbEFkZFRvQ2FydC5hcHBlbmQoc3RpY2t5Q29udGFpbmVySHRtbCgpKTtcblxuICAgIGdlYXRTdGlja3lDb250YWluZXIgPSBidXlQYW5lbEFkZFRvQ2FydC5jaGlsZHJlbignLkdFQVQtMjE2LXN0aWNreS1jb250YWluZXInKTtcblxuICAgIHNtYXJ0R2lmdEJ1dHRvbiA9IGJ1eVBhbmVsQWRkVG9DYXJ0LmZpbmQoJy5wZHAtc21hcnQtZ2lmdC1idXR0b24nKTtcbiAgICBzbWFydEdpZnRCdXR0b24uYWRkQ2xhc3MoJ0dFQVQtMjE2LXNtYXJ0LWdpZnQtYnV0dG9uJyk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlU2l6ZXNPbkRlc2t0b3AoKSB7XG4gICAgc2V0VXBCdXlQYW5lbFNpemVMaXN0KCk7XG4gICAgLy8gMTggZXh0cmEgcGl4ZWxzIGZvciBhZXN0aGV0aWNzXG4gICAgc2V0U2l6ZVRpdGxlUHJpY2VDb250YWluZXJIZWlnaHQoMTgpO1xuICB9XG5cbiAgLy8gLy8vLy8vLy8vLy8vLy9cbiAgLy8gTW9iaWxlIG9ubHlcbiAgLy8gLy8vLy8vLy8vLy8vLy9cblxuICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50c0luQnV5UGFuZWxPbk1vYmlsZSgpIHtcbiAgICBjb25zdCBnaWZ0QnV0dG9uID0gYnV5UGFuZWxBZGRUb0NhcnQuY2hpbGRyZW4oJy5wZHAtc21hcnQtZ2lmdC1idXR0b24nKTtcbiAgICAvLyBzY3JlZW4gd2lkdGggLSB3aWR0aCBvZiBxdWFudGl0eSBkcm9wZG93biAtIG1hcmdpbnMgKGd1dHRlciBsZWZ0ICsgYmV0d2VlbiBidXR0b25zICsgZ3V0dGVyIHJpZ2h0KVxuICAgIGNvbnN0IHdpZHRoID0gc2NyZWVuV2lkdGggLSAxMDAgLSA0OTtcblxuICAgIGdpZnRCdXR0b24uYWRkQ2xhc3MoJ0dFQVQtMjE2LWdpZnQtYnV0dG9uJyk7XG4gICAgZ2lmdEJ1dHRvbi5jc3MoJ3dpZHRoJywgd2lkdGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gYnV5UGFuZWxTaXplTGlzdENsb25lZFNpemVDYWxsYmFja09uTW9iaWxlKF8sIHNpemUpIHtcbiAgICBjb25zdCAkaXRlbSA9IHByZXBhcmVJdGVtU2l6ZShzaXplKTtcblxuICAgICRpdGVtLmNsaWNrKCgpID0+IHsgY3VycmVudGx5U2VsZWN0ZWRJdGVtU2l6ZSA9ICRpdGVtOyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVTaXplc09uTW9iaWxlKCkge1xuICAgIGJ1eVBhbmVsU2l6ZUxpc3QgPSAkY29udGVudFdyYXBwZXIuZmluZCgnI3NpemVDaGlwTGlzdCcpO1xuICAgIGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZSA9IGJ1eVBhbmVsU2l6ZUxpc3QuY2xvbmUoKTtcbiAgICBjb25zdCBwYXJlbnQgPSBidXlQYW5lbFNpemVMaXN0LnBhcmVudCgpO1xuXG4gICAgY29uc3QgY2FsbGJhY2sgPSAoJGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gJGl0ZW0uYXR0cignaWQnKTtcbiAgICAgIGNvbnN0IGxpc3RJdGVtID0gYnV5UGFuZWxTaXplTGlzdENsb25lLmZpbmQoYCMke2lkfWApO1xuXG4gICAgICBsaXN0SXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICB9O1xuXG4gICAgc2V0VXBCdXlQYW5lbFNpemVMaXN0KChfLCBzaXplKSA9PiBzaXplTGlzdFNpemVzQ2FsbGJhY2soXywgc2l6ZSwgY2FsbGJhY2spKTtcblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZS5yZW1vdmVBdHRyKCdkYXRhLXJlYWN0aWQnKTtcblxuICAgIGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZVxuICAgICAgLmNoaWxkcmVuKClcbiAgICAgIC5lYWNoKGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZWRTaXplQ2FsbGJhY2tPbk1vYmlsZSk7XG5cbiAgICBjbG9zZVNpemVMaXN0T25Nb2JpbGUoKTtcbiAgICBwYXJlbnQuYXBwZW5kKGJ1eVBhbmVsU2l6ZUxpc3RDbG9uZSk7XG5cbiAgICAvLyAyOCBleHRyYSBwaXhlbHMgZm9yIGFlc3RoZXRpY3NcbiAgICBzZXRTaXplVGl0bGVQcmljZUNvbnRhaW5lckhlaWdodChnZWF0U2l6ZVRpdGxlUHJpY2VDb250YWluZXIuaGVpZ2h0KCkgKyAyOCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVNpemVMaXN0T25Nb2JpbGUoKSB7XG4gICAgZ2VhdEJ1dHRvbnNDb250YWluZXIucmVtb3ZlQ2xhc3MoJ0dFQVQtMjE2LWNvbnRlbnQtY29udGFpbmVyX19idXR0b25zLS1vdmVybGF5LW9wZW4nKTtcbiAgICBnZWF0VG9wTmF2V3JhcHBlci5yZW1vdmVDbGFzcygnR0VBVC0yMTYtdG9wLW5hdi1jb250YWluZXItLW92ZXJsYXktb3BlbicpO1xuXG4gICAgY29uc3QgZGFya0JhY2tncm91bmQgPSBnZWF0U3RpY2t5Q29udGFpbmVyLmNoaWxkcmVuKCcuR0VBVC0yMTYtZGFyay1iYWNrZ3JvdW5kJyk7XG5cbiAgICBpZiAoZGFya0JhY2tncm91bmQubGVuZ3RoID4gMCkgZGFya0JhY2tncm91bmQucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gYnV5UGFuZWxTaXplTGlzdC5hZGRDbGFzcygnR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3QtLWNsb3NlZCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlblNpemVMaXN0T25Nb2JpbGUoKSB7XG4gICAgZ2VhdEJ1dHRvbnNDb250YWluZXIuYWRkQ2xhc3MoJ0dFQVQtMjE2LWNvbnRlbnQtY29udGFpbmVyX19idXR0b25zLS1vdmVybGF5LW9wZW4nKTtcbiAgICBnZWF0VG9wTmF2V3JhcHBlci5hZGRDbGFzcygnR0VBVC0yMTYtdG9wLW5hdi1jb250YWluZXItLW92ZXJsYXktb3BlbicpO1xuICAgIGdlYXRTdGlja3lDb250YWluZXIucHJlcGVuZCgnPGRpdiBjbGFzcz1cIkdFQVQtMjE2LWRhcmstYmFja2dyb3VuZFwiIC8+Jyk7XG5cbiAgICBnZWF0U3RpY2t5Q29udGFpbmVyXG4gICAgICAuY2hpbGRyZW4oJy5HRUFULTIxNi1kYXJrLWJhY2tncm91bmQnKVxuICAgICAgLy8gRXh0cmEgMjAwIGZvciBhIGxpbCB3aWdnbGUgcm9vbVxuICAgICAgLmNzcygnaGVpZ2h0JywgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgKyAyMDApXG4gICAgICAuY2xpY2soaGFuZGxlQ2xvc2VDbGljayk7XG5cbiAgICByZXR1cm4gYnV5UGFuZWxTaXplTGlzdC5yZW1vdmVDbGFzcygnR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3QtLWNsb3NlZCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VXBUaXRsZXNBbmRQcmljZXNPbk1vYmlsZShwcm9kdWN0UHJpY2UsIHByb2R1Y3RUaXRsZSkge1xuICAgIGdlYXRTaXplVGl0bGVQcmljZUNvbnRhaW5lciA9IGdlYXRDb250ZW50Q29udGFpbmVyXG4gICAgICAuY2hpbGRyZW4oJy5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZScpO1xuXG4gICAgZ2VhdFNpemVUaXRsZVByaWNlQ29udGFpbmVyXG4gICAgICAuY2hpbGRyZW4oJy5HRUFULTIxNi10aXRsZS1wcmljZS1oZWFkaW5nLWNvbnRhaW5lcicpXG4gICAgICAucHJlcGVuZChwcm9kdWN0VGl0bGUpXG4gICAgICAuYXBwZW5kKHByb2R1Y3RQcmljZSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRTcGVjaWZpY0JvdHRvbVN0eWxlT25Nb2JpbGUoKSB7XG4gICAgLy8gY29udGFpbmVyIGhlaWdodCArIHBhZGRpbmcgLSBidXR0b24gY29udGFpbmVyIGhlaWdodCArIGV4dHJhIGZvciBhIGxpbCBjbGVhbmVyIHRyYW5zaXRpb25cbiAgICBjb25zdCBib3R0b20gPSAoZ2VhdFNpemVUaXRsZVByaWNlQ29udGFpbmVyLmhlaWdodCgpICsgMjQgLSA4MSArIDgwKSAqIC0xO1xuXG4gICAgY29uc3QgYm90dG9tU3R5bGUgPSBgXG4gICAgICA8c3R5bGUgdHlwZT0ndGV4dC9jc3MnPlxuICAgICAgICAuR0VBVC0yMTYtY29udGVudC1jb250YWluZXJfX3NpemUtdGl0bGUtcHJpY2UtLWNsb3NlZCB7XG4gICAgICAgICAgYm90dG9tOiAke2JvdHRvbX1weDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5HRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tY2xvc2VkIHtcbiAgICAgICAgICBib3R0b206ICR7Ym90dG9tfXB4O1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgIGA7XG5cbiAgICBqUXVlcnkoYm90dG9tU3R5bGUpLmFwcGVuZFRvKCdoZWFkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRTdGlja3lDb250YWluZXJPbk1vYmlsZSgpIHtcbiAgICBidXlQYW5lbEFkZFRvQ2FydCA9ICRjb250ZW50V3JhcHBlci5maW5kKCcuYnV5cGFuZWxfYWRkdG9jYXJ0Jyk7XG4gICAgYnV5UGFuZWxBZGRUb0NhcnQucHJlcGVuZChzdGlja3lDb250YWluZXJIdG1sKCkpO1xuXG4gICAgZ2VhdFN0aWNreUNvbnRhaW5lciA9IGJ1eVBhbmVsQWRkVG9DYXJ0LmNoaWxkcmVuKCcuR0VBVC0yMTYtc3RpY2t5LWNvbnRhaW5lcicpO1xuXG4gICAgdXBkYXRlRWxlbWVudHNJbkJ1eVBhbmVsT25Nb2JpbGUoKTtcbiAgfVxuXG4gIC8vIC8vLy8vLy8vLy8vLy8vXG4gIC8vIFRhYmxldCBvbmx5XG4gIC8vIC8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gaGFuZGxlR29Ub0FwcElGcmFtZUFwcGVhcmluZygpIHtcbiAgICBpZiAoIWlzT25UYWJsZXQpIHJldHVybjtcblxuICAgIGNvbnN0ICRpRnJhbWVCcmFuY2hCYW5uZXIgPSBqUXVlcnkoJyNicmFuY2gtYmFubmVyLWlmcmFtZScpO1xuXG4gICAgaWYgKCRpRnJhbWVCcmFuY2hCYW5uZXIubGVuZ3RoID4gMCkge1xuICAgICAgZ2VhdFN0aWNreUNvbnRhaW5lci5hZGRDbGFzcygnR0VBVC0yMTYtc3RpY2t5LWNvbnRhaW5lci0taWZyYW1lLW9wZW4nKTtcbiAgICAgIHBkcENvbnRhaW5lci5hZGRDbGFzcygnR0VBVC0yMTYtcGRwLWNvbnRhaW5lci0taWZyYW1lLW9wZW4nKTtcbiAgICAgIGJ1eVBhbmVsU2l6ZUxpc3QuYWRkQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1pZnJhbWUtb3BlbicpO1xuXG4gICAgICAkaUZyYW1lQnJhbmNoQmFubmVyXG4gICAgICAgIC5jb250ZW50cygpXG4gICAgICAgIC5maW5kKCcuYnJhbmNoLWJhbm5lci1jbG9zZScpXG4gICAgICAgIC5jbGljaygoKSA9PiB7XG4gICAgICAgICAgZ2VhdFN0aWNreUNvbnRhaW5lci5yZW1vdmVDbGFzcygnR0VBVC0yMTYtc3RpY2t5LWNvbnRhaW5lci0taWZyYW1lLW9wZW4nKVxuICAgICAgICAgIHBkcENvbnRhaW5lci5yZW1vdmVDbGFzcygnR0VBVC0yMTYtcGRwLWNvbnRhaW5lci0taWZyYW1lLW9wZW4nKVxuICAgICAgICAgIGJ1eVBhbmVsU2l6ZUxpc3QucmVtb3ZlQ2xhc3MoJ0dFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1pZnJhbWUtb3BlbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyAvLy8vLy8vLy8vLy8vL1xuICAvLyBCYXNlIEZ1bmN0aW9uYWxpdHlcbiAgLy8gLy8vLy8vLy8vLy8vLy9cblxuICAvLyBIVE1Mc1xuICBjb25zdCBjbG9zZUJ1dHRvbkh0bWwgPSAoKSA9PiBgXG4gICAgPGRpdiBjbGFzcz1cIkdFQVQtMjE2LWNsb3NlLWxpbmstY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiR0VBVC0yMTYtY2xvc2UtbGlua1wiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cIm5hdi1saXN0LW1vYmlsZS1pY29uIEdFQVQtMjE2LWNsb3NlLWxpbmtfX3hcIiAvPlxuICAgICAgICA8aDQgY2xhc3M9XCJHRUFULTIxNi1jbG9zZS1saW5rX190aXRsZVwiPiBDbG9zZTwvaDQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICBjb25zdCBzaXplRXJyb3JIdG1sID0gKCkgPT4gYFxuICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi1zaXplLWVycm9yXCI+XG4gICAgICBQbGVhc2Ugc2VsZWN0IHNpemVcbiAgICA8L2Rpdj5cbiAgYDtcblxuICBjb25zdCBzdGlja3lDb250YWluZXJIdG1sID0gKCkgPT4ge1xuICAgIGlmIChpc09uTW9iaWxlKSB7XG4gICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwicGRwLXJlZGVzaWduIEdFQVQtMjE2LXN0aWNreS1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiR0VBVC0yMTYtY29udGVudC1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZSBHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZS0tY2xvc2VkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi10aXRsZS1wcmljZS1oZWFkaW5nLWNvbnRhaW5lclwiIC8+XG4gICAgICAgICAgICAgICR7c2l6ZUVycm9ySHRtbCgpfVxuICAgICAgICAgICAgICAke2Nsb3NlQnV0dG9uSHRtbCgpfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fYnV0dG9uc1wiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cInBkcC1yZWRlc2lnbiBHRUFULTIxNi1zdGlja3ktY29udGFpbmVyIEdFQVQtMjE2LXN0aWNreS1jb250YWluZXItLWNsb3NlZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiR0VBVC0yMTYtY29udGVudC1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiR0VBVC0yMTYtdGl0bGUtcHJpY2UtaGVhZGluZy1jb250YWluZXJcIiAvPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fYnV0dG9uc1wiIC8+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZSBHRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZS0tY2xvc2VkXCI+XG4gICAgICAgICAgJHtzaXplRXJyb3JIdG1sKCl9XG4gICAgICAgICAgJHtjbG9zZUJ1dHRvbkh0bWwoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9O1xuXG4gIC8vIEV2ZW50c1xuICBmdW5jdGlvbiBzZXRVcFRpdGxlc0FuZFByaWNlcygpIHtcbiAgICBjb25zdCBidXlQYW5lbEVsZW1lbnRzID0gcGRwQ29udGFpbmVyLmZpbmQoJy5idXlwYW5lbCcpLmNsb25lKCk7XG4gICAgY29uc3QgcHJvZHVjdFByaWNlID0gYnV5UGFuZWxFbGVtZW50cy5maW5kKCcuYnV5cGFuZWxfcHJvZHVjdHByaWNlJyk7XG4gICAgY29uc3QgcHJvZHVjdFRpdGxlID0gYnV5UGFuZWxFbGVtZW50cy5maW5kKCcuYnV5cGFuZWxfcHJvZHVjdHRpdGxlJyk7XG5cbiAgICBwcm9kdWN0UHJpY2UuYWRkQ2xhc3MoJ0dFQVQtMjE2LXByb2R1Y3QtcHJpY2UnKTtcbiAgICBwcm9kdWN0VGl0bGUuYWRkQ2xhc3MoJ0dFQVQtMjE2LXByb2R1Y3QtdGl0bGUnKTtcblxuICAgIHByb2R1Y3RUaXRsZS5jaGlsZHJlbignLmJ1eXBhbmVsX2NhdHRpdGxlJykucmVtb3ZlKCk7XG5cbiAgICBpZiAoaXNPbk1vYmlsZSkgcmV0dXJuIHNldFVwVGl0bGVzQW5kUHJpY2VzT25Nb2JpbGUocHJvZHVjdFByaWNlLCBwcm9kdWN0VGl0bGUpO1xuXG4gICAgcmV0dXJuIHNldFVwVGl0bGVzQW5kUHJpY2VzT25EZXNrdG9wKHByb2R1Y3RQcmljZSwgcHJvZHVjdFRpdGxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFN0aWNreUNvbnRhaW5lcigpIHtcbiAgICBnZWF0VG9wTmF2V3JhcHBlciA9ICRjb250ZW50V3JhcHBlci5maW5kKCcudG9wLW5hdi1jb250YWluZXInKTtcbiAgICBnZWF0VG9wTmF2V3JhcHBlci5hZGRDbGFzcygnR0VBVC0yMTYtdG9wLW5hdi1jb250YWluZXInKTtcblxuICAgIGlmIChpc09uTW9iaWxlKSB7XG4gICAgICBhZGRTdGlja3lDb250YWluZXJPbk1vYmlsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRTdGlja3lDb250YWluZXJPbkRlc2t0b3AoKTtcbiAgICB9XG5cbiAgICBnZWF0Q29udGVudENvbnRhaW5lciA9IGdlYXRTdGlja3lDb250YWluZXIuY2hpbGRyZW4oJy5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcicpO1xuICAgIGdlYXRCdXR0b25zQ29udGFpbmVyID0gZ2VhdENvbnRlbnRDb250YWluZXIuY2hpbGRyZW4oJy5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fYnV0dG9ucycpO1xuXG4gICAgc2V0VXBUaXRsZXNBbmRQcmljZXMoKTtcblxuICAgIGlmIChpc09uTW9iaWxlKSB7XG4gICAgICBtb3ZlU2l6ZXNPbk1vYmlsZSgpO1xuICAgICAgYWRkU3BlY2lmaWNCb3R0b21TdHlsZU9uTW9iaWxlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbW92ZVNpemVzT25EZXNrdG9wKCk7XG4gICAgaGFuZGxlR29Ub0FwcElGcmFtZUFwcGVhcmluZygpO1xuICB9XG5jb25zdCBzdHlsZXMgPSBgXG4gIDxzdHlsZSB0eXBlPSd0ZXh0L2Nzcyc+XG4gICAgLkdFQVQtMjE2LWNsb3NlLWxpbmsge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgIH1cblxuICAgIC5HRUFULTIxNi1jbG9zZS1saW5rX194OmJlZm9yZSB7XG4gICAgICB0b3A6IDA7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgfVxuXG4gICAgLkdFQVQtMjE2LWNsb3NlLWxpbmtfX3g6YWZ0ZXIge1xuICAgICAgdG9wOiAwO1xuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTtcbiAgICB9XG5cbiAgICAuR0VBVC0yMTYtY29udGVudC1jb250YWluZXJfX2J1dHRvbnMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgfVxuXG4gICAgLkdFQVQtMjE2LXBkcC1jb250YWluZXIucGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLXJlZGVzaWduIC5wcm9kdWN0LW1lc3NhZ2luZyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIC5HRUFULTIxNi1zaXplLWVycm9yLS1hY3RpdmUge1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U1MWIyNDtcbiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIHBhZGRpbmc6IDEwcHggMTBweCA4cHg7XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gICAgICAvKioqKioqKioqKioqXG4gICAgICAgKiBDb250YWluZXJzXG4gICAgICAgKioqKioqKioqKioqL1xuXG4gICAgICAuR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3Qge1xuICAgICAgICBib3R0b206IDgxcHg7XG4gICAgICAgIGxlZnQ6IDE1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdHJhbnNpdGlvbjogYm90dG9tIDAuNnMgbGluZWFyO1xuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7XG4gICAgICAgIHotaW5kZXg6IDEwOTtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1jbG9zZWQge1xuICAgICAgICBib3R0b206IC0xMDAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jbG9zZS1saW5rLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDE1cHg7XG4gICAgICAgIHRvcDogMjRweDtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWNvbnRlbnQtY29udGFpbmVyX19idXR0b25zIHtcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgIGJvcmRlci10b3A6IDBweCBzb2xpZCAjRDNEM0QzO1xuICAgICAgICBib3gtc2hhZG93OiAwcHggLTNweCAxMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIGhlaWdodDogODFweDtcbiAgICAgICAgcGFkZGluZzogMjFweCAxNXB4IDE1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIHRyYW5zaXRpb246IGJvcmRlci10b3AgMC4zcyBsaW5lYXIsIGJveC1zaGFkb3cgMC4zcyBsaW5lYXI7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB6LWluZGV4OiAxMTA7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fYnV0dG9ucy0tb3ZlcmxheS1vcGVuIHtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEM0QzRDM7XG4gICAgICAgIGJveC1zaGFkb3c6IDBweCAzMHB4IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICBib3R0b206IDgxcHg7XG4gICAgICAgIHBhZGRpbmc6IDIxcHggMTVweCAwO1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBib3R0b20gMC42cyBsaW5lYXI7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAvKiBUT0RPOiB1cGRhdGUgMTA4IHRvIG5vdCBiZSBzbyBmb3JraW5nIGFyYml0cmFyeSAqL1xuICAgICAgICB6LWluZGV4OiAxMDg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fc2l6ZS10aXRsZS1wcmljZS0tY2xvc2VkIHtcbiAgICAgICAgYm90dG9tOiAtMTAwMHB4O1xuICAgICAgfVxuXG4gICAgICAjdWEtdG9wLW5hdiAudG9wLW5hdi1jb250YWluZXIuR0VBVC0yMTYtdG9wLW5hdi1jb250YWluZXItLW92ZXJsYXktb3BlbiB7XG4gICAgICAgIC8vIHotaW5kZXg6IDI7XG4gICAgICB9XG5cbiAgICAgIC8qKioqKioqKioqKipcbiAgICAgICAqIEl0ZW1zXG4gICAgICAgKioqKioqKioqKioqL1xuXG4gICAgICAuR0VBVC0yMTYtY2xvc2UtbGlua19fdGl0bGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtZGFyay1iYWNrZ3JvdW5kIHtcbiAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIG9wYWNpdHk6IDAuMztcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC00MDBweDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHotaW5kZXg6IDEwODtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWdpZnQtYnV0dG9uIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtcHJvZHVjdC1wcmljZSB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1wZHAtY29udGFpbmVyLnBkcC1jb250YWluZXIgLnBkcC1yZWRlc2lnbiAucGRwLWN0YS1idG4ge1xuICAgICAgICBib3R0b206IDE1cHg7XG4gICAgICAgIG1pbi13aWR0aDogaW5pdGlhbDtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICByaWdodDogMTVweDtcbiAgICAgICAgdG9wOiBpbml0aWFsO1xuICAgICAgICB3aWR0aDogY2FsYyg0OCUgLSAxNXB4KTtcbiAgICAgICAgei1pbmRleDogMTEwO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lciAucGRwLXBheXBhbC1jaGVja291dC1idXR0b24ucGRwLXJlZGVzaWduIHtcbiAgICAgICAgYm90dG9tOiAxNXB4O1xuICAgICAgICBsZWZ0OiAxNXB4O1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOiBpbml0aWFsO1xuICAgICAgICB3aWR0aDogY2FsYyg0OCUgLSAxNXB4KTtcbiAgICAgICAgei1pbmRleDogMTEwO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtc2l6ZS1lcnJvci0tYWN0aXZlIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLm5hdi1saXN0LW1vYmlsZS1pY29uLkdFQVQtMjE2LWNsb3NlLWxpbmtfX3gge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiAzcHg7XG4gICAgICB9XG5cbiAgICAgIC5uYXYtbGlzdC1tb2JpbGUtaWNvbi5HRUFULTIxNi1jbG9zZS1saW5rX194LFxuICAgICAgLm5hdi1saXN0LW1vYmlsZS1pY29uLkdFQVQtMjE2LWNsb3NlLWxpbmtfX3g6YWZ0ZXIsXG4gICAgICAubmF2LWxpc3QtbW9iaWxlLWljb24uR0VBVC0yMTYtY2xvc2UtbGlua19feDpiZWZvcmUge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnBkcC1yZWRlc2lnbiAuc2l6ZS1jaGlwLkdFQVQtMjE2LXNpemUtbGlzdF9fc2l6ZSB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgaGVpZ2h0OiAzNXB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMi40O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIG1pbi13aWR0aDogNDZweDtcbiAgICAgIH1cblxuICAgICAgLnBkcC1yZWRlc2lnbiAuc2l6ZS1jaGlwLkdFQVQtMjE2LXNpemUtbGlzdF9fc2l6ZTpsYXN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLXJlZGVzaWduIC5idXlwYW5lbF9wcm9kdWN0dGl0bGUuR0VBVC0yMTYtcHJvZHVjdC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNHB4O1xuICAgICAgfVxuICAgIH1cblxuICAgIEBtZWRpYSAobWluLXdpZHRoOiA3NjdweCkge1xuICAgICAgLyoqKioqKioqKioqKlxuICAgICAgICogQ29udGFpbmVyc1xuICAgICAgICoqKioqKioqKioqKi9cblxuICAgICAgLkdFQVQtMjE2LXN0aWNreS1jb250YWluZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgYm94LXNoYWRvdzogMHB4IDEwcHggOXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICBwYWRkaW5nOiAxNXB4IDI0cHggMjRweCBjYWxjKDUlICsgMTZweCk7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOiAxMDZweDtcbiAgICAgICAgLy8gdHJhbnNpdGlvbjogdG9wIDAuOHMgZWFzZS1vdXQ7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB6LWluZGV4OiA0O1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtY2xvc2UtbGluay1jb250YWluZXIge1xuICAgICAgICBib3R0b206IDE1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDI0cHg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtY29udGVudC1jb250YWluZXJfX3NpemUtdGl0bGUtcHJpY2UtLWNsb3NlZCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1jb250ZW50LWNvbnRhaW5lcl9fYnV0dG9ucyB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDI0cHg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi10aXRsZS1wcmljZS1oZWFkaW5nLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTdweDtcbiAgICAgIH1cblxuICAgICAgLyogVE9ETzogdHJ5IGFuZCByZW1vdmUgdGhlc2UgKi9cbiAgICAgIC5HRUFULTIxNi10b3AtbmF2LWNvbnRhaW5lciAudWEtdG9wLW5hdi1zaXRlLW5hdiB7XG4gICAgICAgIHotaW5kZXg6IDI7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi10b3AtbmF2LWNvbnRhaW5lciAudWEtdG9wLW5hdi1tZXNzYWdpbmctY29udGFpbmVyIHtcbiAgICAgICAgei1pbmRleDogMjtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LXRvcC1uYXYtY29udGFpbmVyIC51YS10b3AtbmF2LWJhciB7XG4gICAgICAgIHotaW5kZXg6IDI7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1wZHAtY29udGFpbmVyIC5wcm9kdWN0LXRodW1ibmFpbC1pbWFnZXMge1xuICAgICAgICB6LWluZGV4OiAyO1xuICAgICAgfVxuXG4gICAgICAucGRwLXJlZGVzaWduLkdFQVQtMjE2LXN0aWNreS1jb250YWluZXItLWNsb3NlZCB7XG4gICAgICAgIHRvcDogLTI4MHB4O1xuICAgICAgICAvLyB0cmFuc2l0aW9uOiB0b3AgMC44cyBlYXNlLWluO1xuICAgICAgfVxuXG4gICAgICAvKioqKioqKioqKioqXG4gICAgICAgKiBJdGVtc1xuICAgICAgICoqKioqKioqKioqKi9cblxuICAgICAgLkdFQVQtMjE2LWNsb3NlLWxpbmsge1xuICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWNsb3NlLWxpbms6aG92ZXIge1xuICAgICAgICBjb2xvcjogIzc2NzY3NjtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAucGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLXJlZGVzaWduIC5idXlwYW5lbF9wcm9kdWN0cHJpY2UuR0VBVC0yMTYtcHJvZHVjdC1wcmljZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgbWFyZ2luOiAwIDAgMCAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtcHJvZHVjdC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE1cHg7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LXNpemUtZXJyb3Ige1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICBtYXgtd2lkdGg6IDIwMHB4O1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtc2l6ZS1lcnJvci0tYWN0aXZlIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJ1eXBhbmVsX3NpemVsaXN0LkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3BlbiB7XG4gICAgICAgIHRvcDogMTg4cHg7XG4gICAgICAgIGxlZnQ6IGNhbGMoNSUgKyAxNnB4KTtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAvLyB0cmFuc2l0aW9uOiB0b3AgMC42cyBsaW5lYXI7XG4gICAgICAgIHdpZHRoOiAzNTNweDtcbiAgICAgICAgei1pbmRleDogNTtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3Blbi5HRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tY2xvc2VkIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3Blbi5HRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0tZXJyb3ItYWN0aXZlIHtcbiAgICAgICAgdG9wOiAxOThweDtcbiAgICAgICAgdHJhbnNpdGlvbjogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LWNsb3NlLWxpbms6aG92ZXIgLm5hdi1saXN0LW1vYmlsZS1pY29uLkdFQVQtMjE2LWNsb3NlLWxpbmtfX3g6YWZ0ZXIsXG4gICAgICAuR0VBVC0yMTYtY2xvc2UtbGluazpob3ZlciAubmF2LWxpc3QtbW9iaWxlLWljb24uR0VBVC0yMTYtY2xvc2UtbGlua19feDpiZWZvcmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjNzY3Njc2O1xuICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtZGl2LWN0YS1wbGFjZWhvbGRlciB7XG4gICAgICAgIGhlaWdodDogMzhweDtcbiAgICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1kaXYtY3RhLXBsYWNlaG9sZGVyOmZpcnN0LW9mLXR5cGUge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1kaXYtY3RhLXBsYWNlaG9sZGVyOm50aC1vZi10eXBlKDIpIHtcbiAgICAgICAgaGVpZ2h0OiAxNzBweDtcbiAgICAgIH1cblxuICAgICAgLnBkcC1yZWRlc2lnbiAuc2l6ZS1jaGlwLkdFQVQtMjE2LXNpemUtbGlzdF9fc2l6ZSB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAubmF2LWxpc3QtbW9iaWxlLWljb24uR0VBVC0yMTYtY2xvc2UtbGlua19feCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBtYXJnaW46IDlweCA5cHggMCAwO1xuICAgICAgfVxuXG4gICAgICAubmF2LWxpc3QtbW9iaWxlLWljb24uR0VBVC0yMTYtY2xvc2UtbGlua19feCxcbiAgICAgIC5uYXYtbGlzdC1tb2JpbGUtaWNvbi5HRUFULTIxNi1jbG9zZS1saW5rX194OmFmdGVyLFxuICAgICAgLm5hdi1saXN0LW1vYmlsZS1pY29uLkdFQVQtMjE2LWNsb3NlLWxpbmtfX3g6YmVmb3JlIHtcbiAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC8qIENUQXMgKi9cblxuICAgICAgLkdFQVQtMjE2LXBkcC1jb250YWluZXIucGRwLWNvbnRhaW5lci5HRUFULTIxNi1wZHAtY29udGFpbmVyLS1zdGlja3ktb3BlbiAucGRwLXJlZGVzaWduIC5wZHAtY3RhLWJ0bixcbiAgICAgIC5HRUFULTIxNi1wZHAtY29udGFpbmVyLkdFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuIC5wZHAtcGF5cGFsLWNoZWNrb3V0LWJ1dHRvbi5wZHAtcmVkZXNpZ24ge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMTIxcHg7XG4gICAgICAgIC8vIHRyYW5zaXRpb246IHRvcCAwLjhzIGVhc2Utb3V0O1xuICAgICAgICB3aWR0aDogMjAwcHg7XG4gICAgICAgIHotaW5kZXg6IDExMDtcbiAgICAgIH1cblxuICAgICAgLkdFQVQtMjE2LXBkcC1jb250YWluZXIucGRwLWNvbnRhaW5lci5HRUFULTIxNi1wZHAtY29udGFpbmVyLS1zdGlja3ktb3BlbiAucGRwLXJlZGVzaWduIC5wZHAtY3RhLWJ0biB7XG4gICAgICAgIHJpZ2h0OiAzMHB4O1xuICAgICAgICBtaW4td2lkdGg6IGluaXRpYWw7XG4gICAgICB9XG5cbiAgICAgIC5HRUFULTIxNi1wZHAtY29udGFpbmVyLkdFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuIC5wZHAtcGF5cGFsLWNoZWNrb3V0LWJ1dHRvbi5wZHAtcmVkZXNpZ24ge1xuICAgICAgICByaWdodDogMjQ1cHg7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLy8gLkdFQVQtMjE2LXBkcC1jb250YWluZXIucGRwLWNvbnRhaW5lciAucGRwLXJlZGVzaWduIC5wZHAtY3RhLWJ0bi5HRUFULTIxNi1jdGEtYnV0dG9uLS1oaWRkZW4sXG4gICAgICAvLyAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lciAucGRwLXBheXBhbC1jaGVja291dC1idXR0b24ucGRwLXJlZGVzaWduLkdFQVQtMjE2LWN0YS1idXR0b24tLWhpZGRlbiB7XG4gICAgICAvLyAgIHRvcDogLTI4MHB4O1xuICAgICAgLy8gICB0cmFuc2l0aW9uOiB0b3AgMC44cyBlYXNlLWluO1xuICAgICAgLy8gfVxuXG4gICAgICAuR0VBVC0yMTYtc21hcnQtZ2lmdC1idXR0b24ge1xuICAgICAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lciAucGRwLXBheXBhbC1jaGVja291dC1idXR0b24ucGRwLXJlZGVzaWduIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgIH1cblxuICAgICAgQG1lZGlhIChtaW4td2lkdGg6IDc2N3B4KSBhbmQgKG1heC13aWR0aDogOTkxcHgpIHtcbiAgICAgICAgLyoqKioqKioqKioqKlxuICAgICAgICAgKiBDb250YWluZXJzXG4gICAgICAgICAqKioqKioqKioqKiovXG5cbiAgICAgICAgLnBkcC1jb250YWluZXIucGRwLWNvbnRhaW5lci1yZWRlc2lnbiAuYnV5cGFuZWxfcHJvZHVjdHRpdGxlLkdFQVQtMjE2LXByb2R1Y3QtdGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMTVweDtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIH1cblxuICAgICAgICAucGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLXJlZGVzaWduIC5idXlwYW5lbF9wcm9kdWN0cHJpY2UuR0VBVC0yMTYtcHJvZHVjdC1wcmljZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIH1cblxuICAgICAgICAuR0VBVC0yMTYtc3RpY2t5LWNvbnRhaW5lci0taWZyYW1lLW9wZW4ge1xuICAgICAgICAgIHRvcDogMTg2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAvKioqKioqKioqKioqXG4gICAgICAgICAqIEl0ZW1zXG4gICAgICAgICAqKioqKioqKioqKiovXG5cbiAgICAgICAgLmJ1eXBhbmVsX3NpemVsaXN0LkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1zdGlja3ktb3Blbi5HRUFULTIxNi1idXlwYW5lbC1zaXplbGlzdC0taWZyYW1lLW9wZW4ge1xuICAgICAgICAgIHRvcDogMjY4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3QtLXN0aWNreS1vcGVuLkdFQVQtMjE2LWJ1eXBhbmVsLXNpemVsaXN0LS1lcnJvci1hY3RpdmUuR0VBVC0yMTYtYnV5cGFuZWwtc2l6ZWxpc3QtLWlmcmFtZS1vcGVuIHtcbiAgICAgICAgICB0b3A6IDI3OHB4O1xuICAgICAgICAgIHRyYW5zaXRpb246IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLkdFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuIC5wZHAtcmVkZXNpZ24gLnBkcC1jdGEtYnRuLFxuICAgICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lci5HRUFULTIxNi1wZHAtY29udGFpbmVyLS1zdGlja3ktb3BlbiAucGRwLXBheXBhbC1jaGVja291dC1idXR0b24ucGRwLXJlZGVzaWduIHtcbiAgICAgICAgICB3aWR0aDogMTYwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lci5wZHAtY29udGFpbmVyLkdFQVQtMjE2LXBkcC1jb250YWluZXItLXN0aWNreS1vcGVuLkdFQVQtMjE2LXBkcC1jb250YWluZXItLWlmcmFtZS1vcGVuIC5wZHAtcmVkZXNpZ24gLnBkcC1jdGEtYnRuLFxuICAgICAgICAuR0VBVC0yMTYtcGRwLWNvbnRhaW5lci5HRUFULTIxNi1wZHAtY29udGFpbmVyLS1zdGlja3ktb3Blbi5HRUFULTIxNi1wZHAtY29udGFpbmVyLS1pZnJhbWUtb3BlbiAucGRwLXBheXBhbC1jaGVja291dC1idXR0b24ucGRwLXJlZGVzaWduIHtcbiAgICAgICAgICB0b3A6IDIwMXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLkdFQVQtMjE2LXBkcC1jb250YWluZXIuR0VBVC0yMTYtcGRwLWNvbnRhaW5lci0tc3RpY2t5LW9wZW4gLnBkcC1wYXlwYWwtY2hlY2tvdXQtYnV0dG9uLnBkcC1yZWRlc2lnbiB7XG4gICAgICAgICAgcmlnaHQ6IDIwNHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLkdFQVQtMjE2LXByb2R1Y3QtdGl0bGUge1xuICAgICAgICAgIG1heC13aWR0aDogMjY1cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIDwvc3R5bGU+XG5gO1xuXG4gIGNvbnN0IG9mZmVyID0gKCkgPT4ge1xuICAgIGpRdWVyeShzdHlsZXMpLmFwcGVuZFRvKCdoZWFkJyk7XG5cbiAgICB3aW5kb3cucmVxdWlyZSgncHJvY2VzcycpLm9uY2UoJ2FkZFRvQ2FydC5jb21wbGV0ZScsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjaGVja291dCBjb21wbGV0ZS4uLiBhZGQgdHJhY2tpbmcgZXZlbnQgaGVyZScpO1xuICAgICAgaGFuZGxlQ2xvc2VDbGljaygpO1xuICAgIH0pO1xuXG4gICAgc2NyZWVuV2lkdGggPSB3aW5kb3cuc2NyZWVuLndpZHRoO1xuICAgIGlzT25Nb2JpbGUgPSBzY3JlZW5XaWR0aCA8IDc2ODtcbiAgICBpc09uVGFibGV0ID0gc2NyZWVuV2lkdGggPiA3NjcgJiYgc2NyZWVuV2lkdGggPCA5OTE7XG5cbiAgICBpZiAoIWlzT25Nb2JpbGUpIHtcbiAgICAgIC8vIGJ1dHRvbiBwb3NpdGlvbiAtIG1lc3NhZ2UgbmF2IHNpemUgLSBtYWluIG5hdiBzaXplICsgYnV0dG9uIHNpemVcbiAgICAgIGJ1dHRvblBvc2l0aW9uID0gb3JpZ2luYWxDaGVja291dEJ1dHRvbi5vZmZzZXQoKS50b3AgLSAzMCAtIDc1ICsgNTA7XG4gICAgICBpc1N0aWNreUNvbnRhaW5lck9wZW4gPSBmYWxzZTtcbiAgICAgIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBoYW5kbGVTY3JvbGxPbkRlc2t0b3ApO1xuICAgIH1cblxuICAgIGhhbmRsZUNUQXMoKTtcbiAgICBhZGRTdGlja3lDb250YWluZXIoKTtcbiAgfTtcblxuICBydW5Qb2xsKHBvbGxDb25kaXRpb24sIG9mZmVyLCA1MCk7XG59KCkpO1xuXG4vLyBUT0RPU1xuLy8gLS0tLS1cbi8vXG4vLyBHZW5lcmFsOlxuLy9cbi8vIERlc2t0b3A6XG4vLyAtIFVwZGF0ZSB0cmFuc2l0aW9uXG4vLyAtIFVwZGF0ZSBwb3NpdGlvbiB3aGVyZSBzdGlja3kgY29tZXMgaW5cbi8vXG4vLyBNb2JpbGU6XG4vLyAtIFNpemVzIGNvbnRhaW5lciBzcGFjaW5nIGlzc3VlIGluIGNvbXBpbGVkIGNvZGVcbi8vXG4vLyBUYWJsZXQ6XG4vLyAtIFVwZGF0ZSBwb3NpdGlvbiB3aGVyZSBzdGlja3kgY29tZXMgaW5cbi8vXG4vLyBRQTpcbi8vXG4vLyBCbG9ja2Vyczpcbi8vXG4vLyBMZXNzb25zOlxuLy8gLSBVc2UgdG9nZ2xlIGZ1bmN0aW9ucyBhIGxvdCBtb3JlLiBZb3UgbmVlZCBjb25kaXRpb25hbHNcbiJdLCJzb3VyY2VSb290IjoiIn0=
